!function(e,t,i,o){var n=e(t);e.fn.lazyload=function(r){function f(){var t=0;a.each(function(){var i=e(this);if(!h.skip_invisible||i.is(":visible"))if(e.abovethetop(this,h)||e.leftofbegin(this,h));else if(e.belowthefold(this,h)||e.rightoffold(this,h)){if(++t>h.failure_limit)return!1}else i.trigger("appear"),t=0})}var l,a=this,h={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return r&&(o!==r.failurelimit&&(r.failure_limit=r.failurelimit,delete r.failurelimit),o!==r.effectspeed&&(r.effect_speed=r.effectspeed,delete r.effectspeed),e.extend(h,r)),l=h.container===o||h.container===t?n:e(h.container),0===h.event.indexOf("scroll")&&l.bind(h.event,function(){return f()}),this.each(function(){var t=this,i=e(t);t.loaded=!1,i.attr("src")!==o&&!1!==i.attr("src")||i.is("img")&&i.attr("src",h.placeholder),i.one("appear",function(){if(!this.loaded){if(h.appear){var o=a.length;h.appear.call(t,o,h)}e("<img />").bind("load",function(){var o=i.attr("data-"+h.data_attribute);i.hide(),i.is("img")?i.attr("src",o):i.css("background-image","url('"+o+"')"),i[h.effect](h.effect_speed),t.loaded=!0;var n=e.grep(a,function(e){return!e.loaded});if(a=e(n),h.load){var r=a.length;h.load.call(t,r,h)}}).attr("src",i.attr("data-"+h.data_attribute))}}),0!==h.event.indexOf("scroll")&&i.bind(h.event,function(){t.loaded||i.trigger("appear")})}),n.bind("resize",function(){f()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&n.bind("pageshow",function(t){t.originalEvent&&t.originalEvent.persisted&&a.each(function(){e(this).trigger("appear")})}),e(i).ready(function(){f()}),this},e.belowthefold=function(i,r){return(r.container===o||r.container===t?(t.innerHeight?t.innerHeight:n.height())+n.scrollTop():e(r.container).offset().top+e(r.container).height())<=e(i).offset().top-r.threshold},e.rightoffold=function(i,r){return(r.container===o||r.container===t?n.width()+n.scrollLeft():e(r.container).offset().left+e(r.container).width())<=e(i).offset().left-r.threshold},e.abovethetop=function(i,r){return(r.container===o||r.container===t?n.scrollTop():e(r.container).offset().top)>=e(i).offset().top+r.threshold+e(i).height()},e.leftofbegin=function(i,r){return(r.container===o||r.container===t?n.scrollLeft():e(r.container).offset().left)>=e(i).offset().left+r.threshold+e(i).width()},e.inviewport=function(t,i){return!(e.rightoffold(t,i)||e.leftofbegin(t,i)||e.belowthefold(t,i)||e.abovethetop(t,i))},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})}(jQuery,window,document);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5sYXp5bG9hZC5qcyJdLCJuYW1lcyI6WyIkIiwid2luZG93IiwiZG9jdW1lbnQiLCJ1bmRlZmluZWQiLCIkd2luZG93IiwiZm4iLCJsYXp5bG9hZCIsIm9wdGlvbnMiLCJ1cGRhdGUiLCJjb3VudGVyIiwiZWxlbWVudHMiLCJlYWNoIiwiJHRoaXMiLCJ0aGlzIiwic2V0dGluZ3MiLCJza2lwX2ludmlzaWJsZSIsImlzIiwiYWJvdmV0aGV0b3AiLCJsZWZ0b2ZiZWdpbiIsImJlbG93dGhlZm9sZCIsInJpZ2h0b2Zmb2xkIiwiZmFpbHVyZV9saW1pdCIsInRyaWdnZXIiLCIkY29udGFpbmVyIiwidGhyZXNob2xkIiwiZXZlbnQiLCJlZmZlY3QiLCJjb250YWluZXIiLCJkYXRhX2F0dHJpYnV0ZSIsImFwcGVhciIsImxvYWQiLCJwbGFjZWhvbGRlciIsImZhaWx1cmVsaW1pdCIsImVmZmVjdHNwZWVkIiwiZWZmZWN0X3NwZWVkIiwiZXh0ZW5kIiwiaW5kZXhPZiIsImJpbmQiLCJzZWxmIiwiJHNlbGYiLCJsb2FkZWQiLCJhdHRyIiwib25lIiwiZWxlbWVudHNfbGVmdCIsImxlbmd0aCIsImNhbGwiLCJvcmlnaW5hbCIsImhpZGUiLCJjc3MiLCJ0ZW1wIiwiZ3JlcCIsImVsZW1lbnQiLCJ0ZXN0IiwibmF2aWdhdG9yIiwiYXBwVmVyc2lvbiIsIm9yaWdpbmFsRXZlbnQiLCJwZXJzaXN0ZWQiLCJyZWFkeSIsImlubmVySGVpZ2h0IiwiaGVpZ2h0Iiwic2Nyb2xsVG9wIiwib2Zmc2V0IiwidG9wIiwid2lkdGgiLCJzY3JvbGxMZWZ0IiwibGVmdCIsImludmlld3BvcnQiLCJleHByIiwiYmVsb3ctdGhlLWZvbGQiLCJhIiwiYWJvdmUtdGhlLXRvcCIsInJpZ2h0LW9mLXNjcmVlbiIsImxlZnQtb2Ytc2NyZWVuIiwiaW4tdmlld3BvcnQiLCJhYm92ZS10aGUtZm9sZCIsInJpZ2h0LW9mLWZvbGQiLCJsZWZ0LW9mLWZvbGQiLCJqUXVlcnkiXSwibWFwcGlu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RCxFQUFFa0UsV0FBYSxTQUFTZixFQUFTckMsR0FDNUIsUUFBUWQsRUFBRW9CLFlBQVkrQixFQUFTckMsSUFBY2QsRUFBRWtCLFlBQVlpQyxFQUFTckMsSUFDNURkLEVBQUVtQixhQUFhZ0MsRUFBU3JDLElBQWNkLEVBQUVpQixZQUFZa0MsRUFBU3JDLEtBTzFFZCxFQUFFbUMsT0FBT25DLEVBQUVtRSxLQUFLLE1BQ1pDLGlCQUFtQixTQUFTQyxHQUFLLE9BQU9yRSxFQUFFbUIsYUFBYWtELEdBQUk3QyxVQUFZLEtBQ3ZFOEMsZ0JBQW1CLFNBQVNELEdBQUssT0FBUXJFLEVBQUVtQixhQUFha0QsR0FBSTdDLFVBQVksS0FDeEUrQyxrQkFBbUIsU0FBU0YsR0FBSyxPQUFPckUsRUFBRW9CLFlBQVlpRCxHQUFJN0MsVUFBWSxLQUN0RWdELGlCQUFtQixTQUFTSCxHQUFLLE9BQVFyRSxFQUFFb0IsWUFBWWlELEdBQUk3QyxVQUFZLEtBQ3ZFaUQsY0FBbUIsU0FBU0osR0FBSyxPQUFPckUsRUFBRWtFLFdBQVdHLEdBQUk3QyxVQUFZLEtBRXJFa0QsaUJBQW1CLFNBQVNMLEdBQUssT0FBUXJFLEVBQUVtQixhQUFha0QsR0FBSTdDLFVBQVksS0FDeEVtRCxnQkFBbUIsU0FBU04sR0FBSyxPQUFPckUsRUFBRW9CLFlBQVlpRCxHQUFJN0MsVUFBWSxLQUN0RW9ELGVBQW1CLFNBQVNQLEdBQUssT0FBUXJFLEVBQUVvQixZQUFZaUQsR0FBSTdDLFVBQVksT0EvTi9FLENBa09HcUQsT0FBUTVFLE9BQVFDIiwiZmlsZSI6ImpxdWVyeS5sYXp5bG9hZC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXHJcbiAqIExhenkgTG9hZCAtIGpRdWVyeSBwbHVnaW4gZm9yIGxhenkgbG9hZGluZyBpbWFnZXNcclxuICpcclxuICogQ29weXJpZ2h0IChjKSAyMDA3LTIwMTMgTWlrYSBUdXVwb2xhXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZTpcclxuICogICBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxyXG4gKlxyXG4gKiBQcm9qZWN0IGhvbWU6XHJcbiAqICAgaHR0cDovL3d3dy5hcHBlbHNpaW5pLm5ldC9wcm9qZWN0cy9sYXp5bG9hZFxyXG4gKlxyXG4gKiBWZXJzaW9uOiAgMS45LjNcclxuICpcclxuICovXHJcblxyXG4oZnVuY3Rpb24oJCwgd2luZG93LCBkb2N1bWVudCwgdW5kZWZpbmVkKSB7XHJcbiAgICB2YXIgJHdpbmRvdyA9ICQod2luZG93KTtcclxuXHJcbiAgICAkLmZuLmxhenlsb2FkID0gZnVuY3Rpb24ob3B0aW9ucykge1xyXG4gICAgICAgIHZhciBlbGVtZW50cyA9IHRoaXM7XHJcbiAgICAgICAgdmFyICRjb250YWluZXI7XHJcbiAgICAgICAgdmFyIHNldHRpbmdzID0ge1xyXG4gICAgICAgICAgICB0aHJlc2hvbGQgICAgICAgOiAwLFxyXG4gICAgICAgICAgICBmYWlsdXJlX2xpbWl0ICAgOiAwLFxyXG4gICAgICAgICAgICBldmVudCAgICAgICAgICAgOiBcInNjcm9sbFwiLFxyXG4gICAgICAgICAgICBlZmZlY3QgICAgICAgICAgOiBcInNob3dcIixcclxuICAgICAgICAgICAgY29udGFpbmVyICAgICAgIDogd2luZG93LFxyXG4gICAgICAgICAgICBkYXRhX2F0dHJpYnV0ZSAgOiBcIm9yaWdpbmFsXCIsXHJcbiAgICAgICAgICAgIHNraXBfaW52aXNpYmxlICA6IHRydWUsXHJcbiAgICAgICAgICAgIGFwcGVhciAgICAgICAgICA6IG51bGwsXHJcbiAgICAgICAgICAgIGxvYWQgICAgICAgICAgICA6IG51bGwsXHJcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyICAgICA6IFwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFBRUFBQUFCQ0FZQUFBQWZGY1NKQUFBQUFYTlNSMElBcnM0YzZRQUFBQVJuUVUxQkFBQ3hqd3Y4WVFVQUFBQUpjRWhaY3dBQURzUUFBQTdFQVpVckRoc0FBQUFOU1VSQlZCaFhZemg4K1BCL0FBZmZBMG5OUHVDTEFBQUFBRWxGVGtTdVFtQ0NcIlxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcclxuICAgICAgICAgICAgdmFyIGNvdW50ZXIgPSAwO1xyXG5cclxuICAgICAgICAgICAgZWxlbWVudHMuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Muc2tpcF9pbnZpc2libGUgJiYgISR0aGlzLmlzKFwiOnZpc2libGVcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoJC5hYm92ZXRoZXRvcCh0aGlzLCBzZXR0aW5ncykgfHxcclxuICAgICAgICAgICAgICAgICAgICAkLmxlZnRvZmJlZ2luKHRoaXMsIHNldHRpbmdzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBOb3RoaW5nLiAqL1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghJC5iZWxvd3RoZWZvbGQodGhpcywgc2V0dGluZ3MpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgISQucmlnaHRvZmZvbGQodGhpcywgc2V0dGluZ3MpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLnRyaWdnZXIoXCJhcHBlYXJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIGlmIHdlIGZvdW5kIGFuIGltYWdlIHdlJ2xsIGxvYWQsIHJlc2V0IHRoZSBjb3VudGVyICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ZXIgPSAwO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoKytjb3VudGVyID4gc2V0dGluZ3MuZmFpbHVyZV9saW1pdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZihvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIC8qIE1haW50YWluIEJDIGZvciBhIGNvdXBsZSBvZiB2ZXJzaW9ucy4gKi9cclxuICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCAhPT0gb3B0aW9ucy5mYWlsdXJlbGltaXQpIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMuZmFpbHVyZV9saW1pdCA9IG9wdGlvbnMuZmFpbHVyZWxpbWl0O1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnMuZmFpbHVyZWxpbWl0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh1bmRlZmluZWQgIT09IG9wdGlvbnMuZWZmZWN0c3BlZWQpIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMuZWZmZWN0X3NwZWVkID0gb3B0aW9ucy5lZmZlY3RzcGVlZDtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zLmVmZmVjdHNwZWVkO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkLmV4dGVuZChzZXR0aW5ncywgb3B0aW9ucyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiBDYWNoZSBjb250YWluZXIgYXMgalF1ZXJ5IGFzIG9iamVjdC4gKi9cclxuICAgICAgICAkY29udGFpbmVyID0gKHNldHRpbmdzLmNvbnRhaW5lciA9PT0gdW5kZWZpbmVkIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5jb250YWluZXIgPT09IHdpbmRvdykgPyAkd2luZG93IDogJChzZXR0aW5ncy5jb250YWluZXIpO1xyXG5cclxuICAgICAgICAvKiBGaXJlIG9uZSBzY3JvbGwgZXZlbnQgcGVyIHNjcm9sbC4gTm90IG9uZSBzY3JvbGwgZXZlbnQgcGVyIGltYWdlLiAqL1xyXG4gICAgICAgIGlmICgwID09PSBzZXR0aW5ncy5ldmVudC5pbmRleE9mKFwic2Nyb2xsXCIpKSB7XHJcbiAgICAgICAgICAgICRjb250YWluZXIuYmluZChzZXR0aW5ncy5ldmVudCwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgIHZhciAkc2VsZiA9ICQoc2VsZik7XHJcblxyXG4gICAgICAgICAgICBzZWxmLmxvYWRlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgLyogSWYgbm8gc3JjIGF0dHJpYnV0ZSBnaXZlbiB1c2UgZGF0YTp1cmkuICovXHJcbiAgICAgICAgICAgIGlmICgkc2VsZi5hdHRyKFwic3JjXCIpID09PSB1bmRlZmluZWQgfHwgJHNlbGYuYXR0cihcInNyY1wiKSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIGlmICgkc2VsZi5pcyhcImltZ1wiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzZWxmLmF0dHIoXCJzcmNcIiwgc2V0dGluZ3MucGxhY2Vob2xkZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKiBXaGVuIGFwcGVhciBpcyB0cmlnZ2VyZWQgbG9hZCBvcmlnaW5hbCBpbWFnZS4gKi9cclxuICAgICAgICAgICAgJHNlbGYub25lKFwiYXBwZWFyXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmxvYWRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5hcHBlYXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnRzX2xlZnQgPSBlbGVtZW50cy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLmFwcGVhci5jYWxsKHNlbGYsIGVsZW1lbnRzX2xlZnQsIHNldHRpbmdzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgJChcIjxpbWcgLz5cIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmJpbmQoXCJsb2FkXCIsIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvcmlnaW5hbCA9ICRzZWxmLmF0dHIoXCJkYXRhLVwiICsgc2V0dGluZ3MuZGF0YV9hdHRyaWJ1dGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNlbGYuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzZWxmLmlzKFwiaW1nXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNlbGYuYXR0cihcInNyY1wiLCBvcmlnaW5hbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzZWxmLmNzcyhcImJhY2tncm91bmQtaW1hZ2VcIiwgXCJ1cmwoJ1wiICsgb3JpZ2luYWwgKyBcIicpXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNlbGZbc2V0dGluZ3MuZWZmZWN0XShzZXR0aW5ncy5lZmZlY3Rfc3BlZWQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZGVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBSZW1vdmUgaW1hZ2UgZnJvbSBhcnJheSBzbyBpdCBpcyBub3QgbG9vcGVkIG5leHQgdGltZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gJC5ncmVwKGVsZW1lbnRzLCBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFlbGVtZW50LmxvYWRlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHMgPSAkKHRlbXApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5sb2FkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnRzX2xlZnQgPSBlbGVtZW50cy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MubG9hZC5jYWxsKHNlbGYsIGVsZW1lbnRzX2xlZnQsIHNldHRpbmdzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJzcmNcIiwgJHNlbGYuYXR0cihcImRhdGEtXCIgKyBzZXR0aW5ncy5kYXRhX2F0dHJpYnV0ZSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8qIFdoZW4gd2FudGVkIGV2ZW50IGlzIHRyaWdnZXJlZCBsb2FkIG9yaWdpbmFsIGltYWdlICovXHJcbiAgICAgICAgICAgIC8qIGJ5IHRyaWdnZXJpbmcgYXBwZWFyLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGlmICgwICE9PSBzZXR0aW5ncy5ldmVudC5pbmRleE9mKFwic2Nyb2xsXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAkc2VsZi5iaW5kKHNldHRpbmdzLmV2ZW50LCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXNlbGYubG9hZGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzZWxmLnRyaWdnZXIoXCJhcHBlYXJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLyogQ2hlY2sgaWYgc29tZXRoaW5nIGFwcGVhcnMgd2hlbiB3aW5kb3cgaXMgcmVzaXplZC4gKi9cclxuICAgICAgICAkd2luZG93LmJpbmQoXCJyZXNpemVcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvKiBXaXRoIElPUzUgZm9yY2UgbG9hZGluZyBpbWFnZXMgd2hlbiBuYXZpZ2F0aW5nIHdpdGggYmFjayBidXR0b24uICovXHJcbiAgICAgICAgLyogTm9uIG9wdGltYWwgd29ya2Fyb3VuZC4gKi9cclxuICAgICAgICBpZiAoKC8oPzppcGhvbmV8aXBvZHxpcGFkKS4qb3MgNS9naSkudGVzdChuYXZpZ2F0b3IuYXBwVmVyc2lvbikpIHtcclxuICAgICAgICAgICAgJHdpbmRvdy5iaW5kKFwicGFnZXNob3dcIiwgZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChldmVudC5vcmlnaW5hbEV2ZW50ICYmIGV2ZW50Lm9yaWdpbmFsRXZlbnQucGVyc2lzdGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudHMuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS50cmlnZ2VyKFwiYXBwZWFyXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIEZvcmNlIGluaXRpYWwgY2hlY2sgaWYgaW1hZ2VzIHNob3VsZCBhcHBlYXIuICovXHJcbiAgICAgICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcblxyXG4gICAgLyogQ29udmVuaWVuY2UgbWV0aG9kcyBpbiBqUXVlcnkgbmFtZXNwYWNlLiAgICAgICAgICAgKi9cclxuICAgIC8qIFVzZSBhcyAgJC5iZWxvd3RoZWZvbGQoZWxlbWVudCwge3RocmVzaG9sZCA6IDEwMCwgY29udGFpbmVyIDogd2luZG93fSkgKi9cclxuXHJcbiAgICAkLmJlbG93dGhlZm9sZCA9IGZ1bmN0aW9uKGVsZW1lbnQsIHNldHRpbmdzKSB7XHJcbiAgICAgICAgdmFyIGZvbGQ7XHJcblxyXG4gICAgICAgIGlmIChzZXR0aW5ncy5jb250YWluZXIgPT09IHVuZGVmaW5lZCB8fCBzZXR0aW5ncy5jb250YWluZXIgPT09IHdpbmRvdykge1xyXG4gICAgICAgICAgICBmb2xkID0gKHdpbmRvdy5pbm5lckhlaWdodCA/IHdpbmRvdy5pbm5lckhlaWdodCA6ICR3aW5kb3cuaGVpZ2h0KCkpICsgJHdpbmRvdy5zY3JvbGxUb3AoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmb2xkID0gJChzZXR0aW5ncy5jb250YWluZXIpLm9mZnNldCgpLnRvcCArICQoc2V0dGluZ3MuY29udGFpbmVyKS5oZWlnaHQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmb2xkIDw9ICQoZWxlbWVudCkub2Zmc2V0KCkudG9wIC0gc2V0dGluZ3MudGhyZXNob2xkO1xyXG4gICAgfTtcclxuXHJcbiAgICAkLnJpZ2h0b2Zmb2xkID0gZnVuY3Rpb24oZWxlbWVudCwgc2V0dGluZ3MpIHtcclxuICAgICAgICB2YXIgZm9sZDtcclxuXHJcbiAgICAgICAgaWYgKHNldHRpbmdzLmNvbnRhaW5lciA9PT0gdW5kZWZpbmVkIHx8IHNldHRpbmdzLmNvbnRhaW5lciA9PT0gd2luZG93KSB7XHJcbiAgICAgICAgICAgIGZvbGQgPSAkd2luZG93LndpZHRoKCkgKyAkd2luZG93LnNjcm9sbExlZnQoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmb2xkID0gJChzZXR0aW5ncy5jb250YWluZXIpLm9mZnNldCgpLmxlZnQgKyAkKHNldHRpbmdzLmNvbnRhaW5lcikud2lkdGgoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmb2xkIDw9ICQoZWxlbWVudCkub2Zmc2V0KCkubGVmdCAtIHNldHRpbmdzLnRocmVzaG9sZDtcclxuICAgIH07XHJcblxyXG4gICAgJC5hYm92ZXRoZXRvcCA9IGZ1bmN0aW9uKGVsZW1lbnQsIHNldHRpbmdzKSB7XHJcbiAgICAgICAgdmFyIGZvbGQ7XHJcblxyXG4gICAgICAgIGlmIChzZXR0aW5ncy5jb250YWluZXIgPT09IHVuZGVmaW5lZCB8fCBzZXR0aW5ncy5jb250YWluZXIgPT09IHdpbmRvdykge1xyXG4gICAgICAgICAgICBmb2xkID0gJHdpbmRvdy5zY3JvbGxUb3AoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmb2xkID0gJChzZXR0aW5ncy5jb250YWluZXIpLm9mZnNldCgpLnRvcDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmb2xkID49ICQoZWxlbWVudCkub2Zmc2V0KCkudG9wICsgc2V0dGluZ3MudGhyZXNob2xkICArICQoZWxlbWVudCkuaGVpZ2h0KCk7XHJcbiAgICB9O1xyXG5cclxuICAgICQubGVmdG9mYmVnaW4gPSBmdW5jdGlvbihlbGVtZW50LCBzZXR0aW5ncykge1xyXG4gICAgICAgIHZhciBmb2xkO1xyXG5cclxuICAgICAgICBpZiAoc2V0dGluZ3MuY29udGFpbmVyID09PSB1bmRlZmluZWQgfHwgc2V0dGluZ3MuY29udGFpbmVyID09PSB3aW5kb3cpIHtcclxuICAgICAgICAgICAgZm9sZCA9ICR3aW5kb3cuc2Nyb2xsTGVmdCgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvbGQgPSAkKHNldHRpbmdzLmNvbnRhaW5lcikub2Zmc2V0KCkubGVmdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmb2xkID49ICQoZWxlbWVudCkub2Zmc2V0KCkubGVmdCArIHNldHRpbmdzLnRocmVzaG9sZCArICQoZWxlbWVudCkud2lkdGgoKTtcclxuICAgIH07XHJcblxyXG4gICAgJC5pbnZpZXdwb3J0ID0gZnVuY3Rpb24oZWxlbWVudCwgc2V0dGluZ3MpIHtcclxuICAgICAgICAgcmV0dXJuICEkLnJpZ2h0b2Zmb2xkKGVsZW1lbnQsIHNldHRpbmdzKSAmJiAhJC5sZWZ0b2ZiZWdpbihlbGVtZW50LCBzZXR0aW5ncykgJiZcclxuICAgICAgICAgICAgICAgICEkLmJlbG93dGhlZm9sZChlbGVtZW50LCBzZXR0aW5ncykgJiYgISQuYWJvdmV0aGV0b3AoZWxlbWVudCwgc2V0dGluZ3MpO1xyXG4gICAgIH07XHJcblxyXG4gICAgLyogQ3VzdG9tIHNlbGVjdG9ycyBmb3IgeW91ciBjb252ZW5pZW5jZS4gICAqL1xyXG4gICAgLyogVXNlIGFzICQoXCJpbWc6YmVsb3ctdGhlLWZvbGRcIikuc29tZXRoaW5nKCkgb3IgKi9cclxuICAgIC8qICQoXCJpbWdcIikuZmlsdGVyKFwiOmJlbG93LXRoZS1mb2xkXCIpLnNvbWV0aGluZygpIHdoaWNoIGlzIGZhc3RlciAqL1xyXG5cclxuICAgICQuZXh0ZW5kKCQuZXhwcltcIjpcIl0sIHtcclxuICAgICAgICBcImJlbG93LXRoZS1mb2xkXCIgOiBmdW5jdGlvbihhKSB7IHJldHVybiAkLmJlbG93dGhlZm9sZChhLCB7dGhyZXNob2xkIDogMH0pOyB9LFxyXG4gICAgICAgIFwiYWJvdmUtdGhlLXRvcFwiICA6IGZ1bmN0aW9uKGEpIHsgcmV0dXJuICEkLmJlbG93dGhlZm9sZChhLCB7dGhyZXNob2xkIDogMH0pOyB9LFxyXG4gICAgICAgIFwicmlnaHQtb2Ytc2NyZWVuXCI6IGZ1bmN0aW9uKGEpIHsgcmV0dXJuICQucmlnaHRvZmZvbGQoYSwge3RocmVzaG9sZCA6IDB9KTsgfSxcclxuICAgICAgICBcImxlZnQtb2Ytc2NyZWVuXCIgOiBmdW5jdGlvbihhKSB7IHJldHVybiAhJC5yaWdodG9mZm9sZChhLCB7dGhyZXNob2xkIDogMH0pOyB9LFxyXG4gICAgICAgIFwiaW4tdmlld3BvcnRcIiAgICA6IGZ1bmN0aW9uKGEpIHsgcmV0dXJuICQuaW52aWV3cG9ydChhLCB7dGhyZXNob2xkIDogMH0pOyB9LFxyXG4gICAgICAgIC8qIE1haW50YWluIEJDIGZvciBjb3VwbGUgb2YgdmVyc2lvbnMuICovXHJcbiAgICAgICAgXCJhYm92ZS10aGUtZm9sZFwiIDogZnVuY3Rpb24oYSkgeyByZXR1cm4gISQuYmVsb3d0aGVmb2xkKGEsIHt0aHJlc2hvbGQgOiAwfSk7IH0sXHJcbiAgICAgICAgXCJyaWdodC1vZi1mb2xkXCIgIDogZnVuY3Rpb24oYSkgeyByZXR1cm4gJC5yaWdodG9mZm9sZChhLCB7dGhyZXNob2xkIDogMH0pOyB9LFxyXG4gICAgICAgIFwibGVmdC1vZi1mb2xkXCIgICA6IGZ1bmN0aW9uKGEpIHsgcmV0dXJuICEkLnJpZ2h0b2Zmb2xkKGEsIHt0aHJlc2hvbGQgOiAwfSk7IH1cclxuICAgIH0pO1xyXG5cclxufSkoalF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50KTtcclxuIl19
